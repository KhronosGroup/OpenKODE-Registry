<html><head><meta http-equiv="Content-Type" content="text/html; charset=us-ascii"><title>OpenKODE Core extension: KD_ACR_secure_storage</title><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" title="OpenKODE Core extension: KD_ACR_secure_storage"><div class="titlepage"><div><div><h2 class="title"><a name="id467870"></a>OpenKODE Core extension: KD_ACR_secure_storage</h2></div></div><hr></div><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>Name</td><td>ACR_secure_storage</td></tr><tr><td>Name strings</td><td>KD_ACR_secure_storage</td></tr><tr><td>Contributors</td><td>Hitoshi Ooyama, Acrodea</td></tr><tr><td>Contacts</td><td>Acrodea</td></tr><tr><td>Status</td><td>Draft</td></tr><tr><td>Version</td><td>Version 1, 2011-02-18</td></tr><tr><td>Number</td><td>TBD</td></tr><tr><td>Dependencies</td><td>
            Requires OpenKODE Core 1.0 or later.
            This extension is written based on the wording of the
            OpenKODE Core 1.0 specification.
          </td></tr></tbody></table></div><div class="sect1" title="1.&#160;Overview"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id455472"></a>1.&#160;Overview</h2></div></div></div><p>
      This extension module enables to read in data in a protected area.
      Data in the protected area is encrypted by a key uniquely generated by device so that the data can't be transferred to any other devices.
      In addition, a hush value of a protected file is saved in a device, which prevents a previously backed-up file from operations such as overwriting, data restoration, etc. (Exceptionally, it is possible to overwrite a file after back-up as long as no changes have been made in the file.) 
    </p></div><div class="sect1" title="2.&#160;Header file"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id455491"></a>2.&#160;Header file</h2></div></div></div><p>
        When this extension is present, its facilities are accessed by
        including its header file:
    </p><pre class="synopsis">#include &lt;KD/ACR_secure_storage.h&gt;</pre></div><div class="sect1" title="3.&#160;New function"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id455508"></a>3.&#160;New function</h2></div></div></div><div class="sect2" title="3.1.&#160;kdSecureStorageSetValueACR"><div class="titlepage"><div><div><h3 class="title"><a name="kdSecureStorageSetValueACR"></a>3.1.&#160;kdSecureStorageSetValueACR</h3></div></div></div><a class="indexterm" name="id455625"></a><p>Write in data to a protected area.</p><div class="sect3" title="Synopsis"><div class="titlepage"><div><div><h4 class="title"><a name="id455635"></a>Synopsis</h4></div></div></div><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">KDint <b class="fsfunc">kdSecureStorageSetValueACR</b>(</code></td><td>const KDchar *<var class="pdparam">key</var>, </td></tr><tr><td>&#160;</td><td>const KDchar *<var class="pdparam">data</var>, </td></tr><tr><td>&#160;</td><td>KDsize <var class="pdparam">size</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer">&#160;</div></div></div><div class="sect3" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="id455679"></a>Description</h4></div></div></div><p>
        Write in a data to a protected area.
        It is possible to write in up to 1MByte by data, and memory of a specified volume is saved by atomic operation.
      </p><div class="sect4" title="Parameters"><div class="titlepage"><div><div><h5 class="title"><a name="id455691"></a>Parameters</h5></div></div></div><div class="variablelist"><dl><dt><span class="term"><em class="parameter"><code>key</code></em></span></dt><dd><p>
              Specify a pointer to a key (equivalent to a filename) of data to be saved.
            </p></dd><dt><span class="term"><em class="parameter"><code>data</code></em></span></dt><dd><p>
              Specify a pointer of data to be save in a protected area.
            </p></dd><dt><span class="term">
            <em class="parameter"><code>size</code></em>
          </span></dt><dd><p>
              Specify a length of an argument, data.
            </p></dd></dl></div></div></div><div class="sect3" title="Return value"><div class="titlepage"><div><div><h4 class="title"><a name="id496117"></a>Return value</h4></div></div></div><p>
        Upon the normal termination, a size of a written in data is returned.
        Upon the abnormal termination, -1 is returned.  For details of the error, refer to <code class="function">kdGetError</code>.
      </p></div><div class="sect3" title="Error codes"><div class="titlepage"><div><div><h4 class="title"><a name="id496135"></a>Error codes</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="literal">KD_EIO</code></span></dt><dd><p>
            An encryption error. Or, when the data is being written in a disk, it will occur if a low-level I/O error happens.
            </p></dd><dt><span class="term"><code class="literal">KD_EINVAL</code></span></dt><dd><p>
                key and data are NULL, size is over the limit value, or key is blank.
            </p></dd></dl></div></div></div><div class="sect2" title="3.2.&#160;kdSecureStorageGetValueACR"><div class="titlepage"><div><div><h3 class="title"><a name="kdSecureStorageGetValueACR"></a>3.2.&#160;kdSecureStorageGetValueACR</h3></div></div></div><a class="indexterm" name="id496192"></a><p>Read in data from the protected area.</p><div class="sect3" title="Synopsis"><div class="titlepage"><div><div><h4 class="title"><a name="id496202"></a>Synopsis</h4></div></div></div><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">KDint <b class="fsfunc">kdSecureStorageGetValueACR</b>(</code></td><td>const KDchar *<var class="pdparam">key</var>, </td></tr><tr><td>&#160;</td><td>KDchar *<var class="pdparam">buf</var>, </td></tr><tr><td>&#160;</td><td>KDsize <var class="pdparam">maxSize</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer">&#160;</div></div></div><div class="sect3" title="Description"><div class="titlepage"><div><div><h4 class="title"><a name="id496247"></a>Description</h4></div></div></div><p>
        Read in data from the protected area.
        Read in all the written data.
      </p><div class="sect4" title="Parameters"><div class="titlepage"><div><div><h5 class="title"><a name="id496257"></a>Parameters</h5></div></div></div><div class="variablelist"><dl><dt><span class="term"><em class="parameter"><code>key</code></em></span></dt><dd><p>
              Specify a pointer to a key (equivalent to a filename) of data to be read in.
            </p></dd><dt><span class="term"><em class="parameter"><code>buf</code></em></span></dt><dd><p>
              Specify a pointer to an area which stores the data read in from the protected area.
            </p></dd><dt><span class="term">
            <em class="parameter"><code>maxSize</code></em>
          </span></dt><dd><p>
              Specify a data size secured for data storage area (buf).
            </p></dd></dl></div></div></div><div class="sect3" title="Return value"><div class="titlepage"><div><div><h4 class="title"><a name="id496326"></a>Return value</h4></div></div></div><p>
        Upon the normal termination, the size of read-in data is returned.
        If a key is not present, 0 is returned as the size of read-in data.
        Upon the abnormal termination, -1 is returned.  For details of the error, refer to <code class="function">kdGetError</code>.
      </p></div><div class="sect3" title="Error codes"><div class="titlepage"><div><div><h4 class="title"><a name="id496346"></a>Error codes</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="literal">KD_EIO</code></span></dt><dd><p>
            An encryption error. Or, when the data is being written in a disk, it will occur if a low-level I/O error happens.
            </p></dd><dt><span class="term"><code class="literal">KD_EINVAL</code></span></dt><dd><p>
                key and buf are NULL, maxsize is over the limit value, or  key is blank.
            </p></dd></dl></div></div></div></div><div class="sect1" title="4.&#160;Revision history"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id454641"></a>4.&#160;Revision history</h2></div></div></div><div class="sect2" title="4.1.&#160;Version 1, 2011-02-18"><div class="titlepage"><div><div><h3 class="title"><a name="id454646"></a>4.1.&#160;Version 1, 2011-02-18</h3></div></div></div><p>
        Initial version.
    </p></div></div></div></body></html>
